<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVM G√∂rsel A√ßƒ±klama</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h2 {
            color: #667eea;
            margin-bottom: 20px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        
        .evm-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        
        .info-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .component-label {
            font-weight: bold;
            color: #333;
        }
        
        .description {
            color: #666;
            margin-top: 5px;
            font-size: 14px;
        }
        
        .interactive-hint {
            text-align: center;
            color: #999;
            font-style: italic;
            margin-top: 15px;
        }
        
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî∑ Ethereum Virtual Machine (EVM) G√∂rsel Rehber</h1>
        
        <div class="section">
            <h2>1. EVM'in ƒ∞√ß Yapƒ±sƒ±</h2>
            
            <div class="evm-container">
                <svg width="800" height="500" viewBox="0 0 800 500">
                    <!-- Ana EVM Kutusu -->
                    <rect x="50" y="30" width="700" height="440" fill="#f0f4ff" stroke="#667eea" stroke-width="3" rx="10"/>
                    <text x="400" y="60" text-anchor="middle" font-size="24" font-weight="bold" fill="#667eea">
                        ETHEREUM VIRTUAL MACHINE (EVM)
                    </text>
                    
                    <!-- Stack -->
                    <g id="stack">
                        <rect x="80" y="100" width="150" height="200" fill="#ffe6e6" stroke="#ff4444" stroke-width="2" rx="5"/>
                        <text x="155" y="130" text-anchor="middle" font-weight="bold" fill="#ff4444">STACK</text>
                        
                        <!-- Stack elemanlarƒ± -->
                        <rect x="90" y="250" width="130" height="30" fill="#ffcccc" stroke="#ff4444"/>
                        <text x="155" y="270" text-anchor="middle" font-size="12">0x1234...</text>
                        
                        <rect x="90" y="215" width="130" height="30" fill="#ffcccc" stroke="#ff4444"/>
                        <text x="155" y="235" text-anchor="middle" font-size="12">0x5678...</text>
                        
                        <rect x="90" y="180" width="130" height="30" fill="#ffcccc" stroke="#ff4444"/>
                        <text x="155" y="200" text-anchor="middle" font-size="12">0xABCD...</text>
                        
                        <rect x="90" y="145" width="130" height="30" fill="#ffcccc" stroke="#ff4444"/>
                        <text x="155" y="165" text-anchor="middle" font-size="12">0xEF01...</text>
                    </g>
                    
                    <!-- Memory -->
                    <g id="memory">
                        <rect x="270" y="100" width="200" height="200" fill="#e6f3ff" stroke="#4444ff" stroke-width="2" rx="5"/>
                        <text x="370" y="130" text-anchor="middle" font-weight="bold" fill="#4444ff">MEMORY</text>
                        
                        <!-- Memory slots -->
                        <rect x="280" y="150" width="180" height="25" fill="#cce6ff" stroke="#4444ff"/>
                        <text x="290" y="167" font-size="11">0x00: ge√ßici veri</text>
                        
                        <rect x="280" y="180" width="180" height="25" fill="#cce6ff" stroke="#4444ff"/>
                        <text x="290" y="197" font-size="11">0x20: function args</text>
                        
                        <rect x="280" y="210" width="180" height="25" fill="#cce6ff" stroke="#4444ff"/>
                        <text x="290" y="227" font-size="11">0x40: free memory ptr</text>
                        
                        <rect x="280" y="240" width="180" height="25" fill="#cce6ff" stroke="#4444ff"/>
                        <text x="290" y="257" font-size="11">0x60: return data</text>
                    </g>
                    
                    <!-- Storage -->
                    <g id="storage">
                        <rect x="510" y="100" width="220" height="200" fill="#e6ffe6" stroke="#44ff44" stroke-width="2" rx="5"/>
                        <text x="620" y="130" text-anchor="middle" font-weight="bold" fill="#44ff44">STORAGE</text>
                        <text x="620" y="150" text-anchor="middle" font-size="11" fill="#666">(Kalƒ±cƒ± Depolama)</text>
                        
                        <!-- Storage slots -->
                        <rect x="520" y="170" width="200" height="25" fill="#ccffcc" stroke="#44ff44"/>
                        <text x="530" y="187" font-size="11">Slot 0: balances mapping</text>
                        
                        <rect x="520" y="200" width="200" height="25" fill="#ccffcc" stroke="#44ff44"/>
                        <text x="530" y="217" font-size="11">Slot 1: owner address</text>
                        
                        <rect x="520" y="230" width="200" height="25" fill="#ccffcc" stroke="#44ff44"/>
                        <text x="530" y="247" font-size="11">Slot 2: totalSupply</text>
                        
                        <rect x="520" y="260" width="200" height="25" fill="#ccffcc" stroke="#44ff44"/>
                        <text x="530" y="277" font-size="11">Slot 3: contract state</text>
                    </g>
                    
                    <!-- Program Counter -->
                    <g id="pc">
                        <rect x="80" y="330" width="150" height="60" fill="#fff0e6" stroke="#ff8844" stroke-width="2" rx="5"/>
                        <text x="155" y="355" text-anchor="middle" font-weight="bold" fill="#ff8844">Program Counter</text>
                        <text x="155" y="375" text-anchor="middle" font-size="14">PC: 0x123</text>
                    </g>
                    
                    <!-- Gas Counter -->
                    <g id="gas">
                        <rect x="270" y="330" width="150" height="60" fill="#f0e6ff" stroke="#8844ff" stroke-width="2" rx="5"/>
                        <text x="345" y="355" text-anchor="middle" font-weight="bold" fill="#8844ff">Gas Counter</text>
                        <text x="345" y="375" text-anchor="middle" font-size="14">21000 gas</text>
                    </g>
                    
                    <!-- Call Data -->
                    <g id="calldata">
                        <rect x="460" y="330" width="150" height="60" fill="#ffe6f0" stroke="#ff4488" stroke-width="2" rx="5"/>
                        <text x="535" y="355" text-anchor="middle" font-weight="bold" fill="#ff4488">Call Data</text>
                        <text x="535" y="375" text-anchor="middle" font-size="12">Input verileri</text>
                    </g>
                    
                    <!-- Return Data -->
                    <g id="returndata">
                        <rect x="630" y="330" width="100" height="60" fill="#e6fff0" stroke="#44ff88" stroke-width="2" rx="5"/>
                        <text x="680" y="355" text-anchor="middle" font-weight="bold" fill="#44ff88">Return</text>
                        <text x="680" y="375" text-anchor="middle" font-size="12">Output</text>
                    </g>
                    
                    <!-- Oklar -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#667eea"/>
                        </marker>
                    </defs>
                    
                    <!-- Stack to Memory arrow -->
                    <path d="M 230 200 L 270 200" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
                    
                    <!-- Memory to Storage arrow -->
                    <path d="M 470 200 L 510 200" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
                </svg>
            </div>
            
            <div class="info-box">
                <div class="component-label">üìä STACK (Yƒ±ƒüƒ±n)</div>
                <div class="description">
                    ‚Ä¢ Max 1024 eleman, her biri 256 bit (32 byte)<br>
                    ‚Ä¢ LIFO (Last In First Out) - Son giren ilk √ßƒ±kar<br>
                    ‚Ä¢ Hƒ±zlƒ± eri≈üim, ge√ßici hesaplamalar i√ßin kullanƒ±lƒ±r
                </div>
            </div>
            
            <div class="info-box">
                <div class="component-label">üíæ MEMORY (Bellek)</div>
                <div class="description">
                    ‚Ä¢ Ge√ßici veri depolama alanƒ±<br>
                    ‚Ä¢ ƒ∞≈ülem s√ºresince ya≈üar, sonra silinir<br>
                    ‚Ä¢ Byte-adreslenebilir, dinamik boyut
                </div>
            </div>
            
            <div class="info-box">
                <div class="component-label">üóÑÔ∏è STORAGE (Kalƒ±cƒ± Depo)</div>
                <div class="description">
                    ‚Ä¢ Blockchain'de kalƒ±cƒ± olarak saklanƒ±r<br>
                    ‚Ä¢ En pahalƒ± i≈ülem (gas a√ßƒ±sƒ±ndan)<br>
                    ‚Ä¢ State variables burada tutulur
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>2. Solidity'den Deploy S√ºreci</h2>
            
            <div class="evm-container">
                <svg width="800" height="600" viewBox="0 0 800 600">
                    <!-- Ba≈ülƒ±k -->
                    <text x="400" y="30" text-anchor="middle" font-size="20" font-weight="bold" fill="#667eea">
                        Smart Contract Deploy S√ºreci
                    </text>
                    
                    <!-- 1. Solidity Kodu -->
                    <g id="solidity-code">
                        <rect x="50" y="60" width="200" height="100" fill="#e6f3ff" stroke="#4444ff" stroke-width="2" rx="5"/>
                        <text x="150" y="90" text-anchor="middle" font-weight="bold" fill="#4444ff">1. Solidity Kodu</text>
                        <text x="150" y="115" text-anchor="middle" font-size="12">contract MyToken {</text>
                        <text x="150" y="135" text-anchor="middle" font-size="12">  uint balance;</text>
                        <text x="150" y="150" text-anchor="middle" font-size="12">}</text>
                    </g>
                    
                    <!-- Ok 1 -->
                    <path d="M 250 110 L 320 110" stroke="#667eea" stroke-width="3" marker-end="url(#arrowhead)"/>
                    <text x="285" y="100" text-anchor="middle" font-size="11" fill="#666">compile</text>
                    
                    <!-- 2. Bytecode -->
                    <g id="bytecode">
                        <rect x="320" y="60" width="200" height="100" fill="#ffe6e6" stroke="#ff4444" stroke-width="2" rx="5"/>
                        <text x="420" y="90" text-anchor="middle" font-weight="bold" fill="#ff4444">2. Bytecode + ABI</text>
                        <text x="420" y="115" text-anchor="middle" font-size="10" font-family="monospace">0x608060405234801561</text>
                        <text x="420" y="130" text-anchor="middle" font-size="10" font-family="monospace">001057600080fd6000</text>
                        <text x="420" y="145" text-anchor="middle" font-size="10" font-family="monospace">35c08063a9059...</text>
                    </g>
                    
                    <!-- Ok 2 -->
                    <path d="M 520 110 L 590 110" stroke="#667eea" stroke-width="3" marker-end="url(#arrowhead)"/>
                    <text x="555" y="100" text-anchor="middle" font-size="11" fill="#666">deploy tx</text>
                    
                    <!-- 3. Transaction -->
                    <g id="transaction">
                        <rect x="590" y="60" width="160" height="100" fill="#f0e6ff" stroke="#8844ff" stroke-width="2" rx="5"/>
                        <text x="670" y="90" text-anchor="middle" font-weight="bold" fill="#8844ff">3. Transaction</text>
                        <text x="670" y="110" text-anchor="middle" font-size="11">To: 0x0 (create)</text>
                        <text x="670" y="125" text-anchor="middle" font-size="11">Data: bytecode</text>
                        <text x="670" y="140" text-anchor="middle" font-size="11">Gas: 500000</text>
                    </g>
                    
                    <!-- Ok 3 - a≈üaƒüƒ± -->
                    <path d="M 670 160 L 670 210" stroke="#667eea" stroke-width="3" marker-end="url(#arrowhead)"/>
                    <text x="690" y="185" font-size="11" fill="#666">send</text>
                    
                    <!-- 4. EVM ƒ∞≈ülemi -->
                    <g id="evm-process">
                        <rect x="150" y="210" width="500" height="250" fill="#fff8e6" stroke="#ff8844" stroke-width="3" rx="10"/>
                        <text x="400" y="240" text-anchor="middle" font-size="18" font-weight="bold" fill="#ff8844">4. EVM ƒ∞≈ülem S√ºreci</text>
                        
                        <!-- EVM i√ßi adƒ±mlar -->
                        <rect x="170" y="260" width="140" height="60" fill="#ffe6f0" stroke="#ff4488" stroke-width="2" rx="5"/>
                        <text x="240" y="285" text-anchor="middle" font-weight="bold" font-size="12">A. Validation</text>
                        <text x="240" y="305" text-anchor="middle" font-size="10">Gas kontrol√º</text>
                        
                        <path d="M 310 290 L 350 290" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
                        
                        <rect x="350" y="260" width="140" height="60" fill="#e6fff0" stroke="#44ff88" stroke-width="2" rx="5"/>
                        <text x="420" y="285" text-anchor="middle" font-weight="bold" font-size="12">B. Execution</text>
                        <text x="420" y="305" text-anchor="middle" font-size="10">Bytecode √ßalƒ±≈ütƒ±r</text>
                        
                        <path d="M 490 290 L 530 290" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
                        
                        <rect x="530" y="260" width="100" height="60" fill="#e6f3ff" stroke="#4444ff" stroke-width="2" rx="5"/>
                        <text x="580" y="285" text-anchor="middle" font-weight="bold" font-size="12">C. Storage</text>
                        <text x="580" y="305" text-anchor="middle" font-size="10">State kaydet</text>
                        
                        <!-- Constructor √ßalƒ±≈ümasƒ± -->
                        <rect x="250" y="350" width="300" height="80" fill="#f0f4ff" stroke="#667eea" stroke-width="2" rx="5"/>
                        <text x="400" y="375" text-anchor="middle" font-weight="bold" fill="#667eea">Constructor √áalƒ±≈üƒ±r</text>
                        <text x="400" y="395" text-anchor="middle" font-size="11">‚Ä¢ Initial state ayarlanƒ±r</text>
                        <text x="400" y="410" text-anchor="middle" font-size="11">‚Ä¢ Contract adresi olu≈üturulur</text>
                    </g>
                    
                    <!-- Ok 4 - a≈üaƒüƒ± -->
                    <path d="M 400 460 L 400 510" stroke="#667eea" stroke-width="3" marker-end="url(#arrowhead)"/>
                    
                    <!-- 5. Deployed Contract -->
                    <g id="deployed">
                        <rect x="250" y="510" width="300" height="70" fill="#d4f8d4" stroke="#44aa44" stroke-width="3" rx="5"/>
                        <text x="400" y="540" text-anchor="middle" font-size="16" font-weight="bold" fill="#44aa44">5. Contract Deployed! ‚úÖ</text>
                        <text x="400" y="560" text-anchor="middle" font-size="12">Address: 0x742d35Cc6634C053...</text>
                    </g>
                </svg>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #4444ff;"></div>
                    <span>Kod/Derleme A≈üamasƒ±</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ff4444;"></div>
                    <span>Bytecode √úretimi</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #8844ff;"></div>
                    <span>Transaction Olu≈üturma</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ff8844;"></div>
                    <span>EVM ƒ∞≈ülemi</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #44aa44;"></div>
                    <span>Ba≈üarƒ±lƒ± Deploy</span>
                </div>
            </div>
            
            <div class="info-box">
                <div class="component-label">üîÑ Deploy S√ºrecinin √ñzeti:</div>
                <div class="description">
                    1. <strong>Solidity Kodu:</strong> Akƒ±llƒ± kontrat y√ºksek seviyeli Solidity dilinde yazƒ±lƒ±r<br><br>
                    2. <strong>Compile (Derleme):</strong> Solidity compiler (solc) kodu bytecode'a √ßevirir + ABI olu≈üturur<br><br>
                    3. <strong>Transaction Olu≈üturma:</strong> Bytecode bir transaction'ƒ±n data alanƒ±na konur, "to" adresi 0x0 olur<br><br>
                    4. <strong>EVM ƒ∞≈ülemi:</strong> 
                       ‚Ä¢ Gas kontrol√º yapƒ±lƒ±r
                       ‚Ä¢ Bytecode √ßalƒ±≈ütƒ±rƒ±lƒ±r
                       ‚Ä¢ Constructor kodu execute edilir
                       ‚Ä¢ Contract state'i storage'a yazƒ±lƒ±r<br><br>
                    5. <strong>Contract Adresi:</strong> Deploy eden adres + nonce'dan hesaplanƒ±r ve contract bu adrese yerle≈ütirilir
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>3. EVM Teknik Protokol Detaylarƒ±</h2>
            
            <div class="info-box">
                <div class="component-label">‚öôÔ∏è EVM Execution Model</div>
                <div class="description">
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto;">
// EVM State Transition Function
œÉ' = Œ•(œÉ, T)

Burada:
œÉ  = Mevcut world state
œÉ' = Yeni world state  
T  = Transaction
Œ•  = State transition function

// Transaction Execution
Œ•(œÉ, T) ‚â° Œì(œÉ, T) if T is message call
Œ•(œÉ, T) ‚â° Œõ(œÉ, T) if T is contract creation</pre>
                </div>
            </div>

            <div class="info-box">
                <div class="component-label">üìê Gas Hesaplama Algoritmasƒ±</div>
                <div class="description">
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto;">
// Intrinsic Gas Calculation
g‚ÇÄ = Gtransaction + Œ£·µ¢ g·µ¢

Gtransaction = 21000  // Base transaction cost

// Data gas cost per byte
g·µ¢ = {
    4 if byte = 0x00 (Gtxdatazero)
    16 if byte ‚â† 0x00 (Gtxdatanonzero)
}

// Contract creation additional cost
if (to == null) {
    g‚ÇÄ += 32000  // Gcreate
    g‚ÇÄ += 200 * codeSize  // Deployment cost
}

// Access list costs (EIP-2930)
g‚ÇÄ += 2400 * len(accessList.addresses)
g‚ÇÄ += 1900 * len(accessList.storageKeys)</pre>
                </div>
            </div>

            <div class="info-box">
                <div class="component-label">üîê Contract Address Generation</div>
                <div class="description">
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto;">
// CREATE opcode (0xf0)
address = keccak256(rlp([sender_address, sender_nonce]))[12:]

// CREATE2 opcode (0xf5) - Deterministic deployment
address = keccak256(0xff ++ deployer_addr ++ salt ++ keccak256(bytecode))[12:]

// RLP Encoding Example
rlp([0xabc...123, 15]) = [0xd6, 0x94, 0xab, 0xc1, ..., 0x23, 0x0f]

// Nonce increment
account.nonce = account.nonce + 1</pre>
                </div>
            </div>

            <div class="info-box">
                <div class="component-label">üíæ Merkle Patricia Trie Storage</div>
                <div class="description">
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto;">
// State Root Calculation
stateRoot = merklePatriciaRoot(accounts)

// Account State
Account = {
    nonce: uint64,
    balance: uint256,
    storageRoot: bytes32,  // Merkle root of storage trie
    codeHash: bytes32      // keccak256(code)
}

// Storage Slot Calculation for Mappings
slot = keccak256(key ++ baseSlot)

// Dynamic Array Storage
array[i] location = keccak256(slot) + i * elementSize

// Packed Storage Optimization
// Multiple values < 32 bytes stored in single slot
struct Packed {
    uint128 a;  // slot n, bytes 0-15
    uint128 b;  // slot n, bytes 16-31
}</pre>
                </div>
            </div>

            <div class="info-box">
                <div class="component-label">üéØ Opcode Execution</div>
                <div class="description">
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto;">
// EVM Opcode Categories & Gas Costs

// 1. Arithmetic Operations
ADD         (0x01): 3 gas     // a + b
MUL         (0x02): 5 gas     // a * b
SUB         (0x03): 3 gas     // a - b
DIV         (0x04): 5 gas     // a / b
EXP         (0x0a): 10 + 50 * byte_len(exponent)

// 2. Stack Operations  
PUSH1       (0x60): 3 gas     // Push 1 byte
PUSH32      (0x7f): 3 gas     // Push 32 bytes
POP         (0x50): 2 gas     // Remove top
DUP1        (0x80): 3 gas     // Duplicate 1st
SWAP1       (0x90): 3 gas     // Swap 1st & 2nd

// 3. Memory Operations
MLOAD       (0x51): 3 + memory_expansion_cost
MSTORE      (0x52): 3 + memory_expansion_cost
MSTORE8     (0x53): 3 + memory_expansion_cost

// 4. Storage Operations
SLOAD       (0x54): {
    2100 if cold access (first time)
    100 if warm access (subsequent)
}
SSTORE      (0x55): {
    20000 if value 0 -> non-zero (cold)
    2900 if value non-zero -> non-zero
    2900 + 15000 refund if non-zero -> 0
}

// 5. Environmental Information
ADDRESS     (0x30): 2 gas     // Current contract address
CALLER      (0x33): 2 gas     // msg.sender
CALLVALUE   (0x34): 2 gas     // msg.value
CALLDATALOAD(0x35): 3 gas     // Input data
CODESIZE    (0x38): 2 gas     // Current code size
GASPRICE    (0x3a): 2 gas     // tx.gasprice

// 6. Block Information
BLOCKHASH   (0x40): 20 gas    // Hash of block
COINBASE    (0x41): 2 gas     // Block miner
TIMESTAMP   (0x42): 2 gas     // Block timestamp
NUMBER      (0x43): 2 gas     // Block number
DIFFICULTY  (0x44): 2 gas     // Block difficulty
GASLIMIT    (0x45): 2 gas     // Block gas limit
CHAINID     (0x46): 2 gas     // Chain ID
BASEFEE     (0x48): 2 gas     // EIP-1559 base fee

// 7. Control Flow
JUMP        (0x56): 8 gas     // Jump to position
JUMPI       (0x57): 10 gas    // Conditional jump
JUMPDEST    (0x5b): 1 gas     // Jump destination
REVERT      (0xfd): 0 gas     // Revert execution
RETURN      (0xf3): 0 gas     // Return data
STOP        (0x00): 0 gas     // Halt execution

// 8. System Operations
CREATE      (0xf0): 32000 gas  // Deploy contract
CREATE2     (0xf5): 32000 gas  // Deterministic deploy
CALL        (0xf1): 700 + call_value_cost + memory_cost
STATICCALL  (0xfa): 700 + memory_cost
DELEGATECALL(0xf4): 700 + memory_cost
SELFDESTRUCT(0xff): 5000 + 25000 if new beneficiary</pre>
                </div>
            </div>

            <div class="info-box">
                <div class="component-label">üßÆ Memory Expansion Cost</div>
                <div class="description">
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto;">
// Memory Cost Calculation
memory_cost = (memory_size_word¬≤ / 512) + (3 * memory_size_word)

// Example:
// 32 bytes (1 word) = 3 gas
// 64 bytes (2 words) = 6 gas  
// 96 bytes (3 words) = 9 gas
// ...
// 724 bytes = 60 gas
// 1024 bytes = 98 gas (quadratic growth starts)

function memoryGasCost(size) {
    size_in_words = (size + 31) / 32
    linear_cost = size_in_words * 3
    quadratic_cost = size_in_words * size_in_words / 512
    return linear_cost + quadratic_cost
}</pre>
                </div>
            </div>

            <div class="info-box">
                <div class="component-label">üîÑ Stack Machine Execution</div>
                <div class="description">
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto;">
// Example: (a + b) * c calculation

// Bytecode sequence:
PUSH1 0x03  // Push 3 onto stack       [3]
PUSH1 0x04  // Push 4 onto stack       [4, 3]
ADD         // Pop 2, add, push result [7]
PUSH1 0x02  // Push 2 onto stack       [2, 7]
MUL         // Pop 2, multiply, push   [14]

// Gas consumption:
// PUSH1: 3 gas √ó 3 = 9 gas
// ADD: 3 gas
// MUL: 5 gas
// Total: 17 gas

// Stack depth check
if (stack.length > 1024) {
    throw StackOverflowError
}

// Each operation validates stack requirements
ADD requires: stack.length >= 2
Result: stack.push(stack.pop() + stack.pop())</pre>
                </div>
            </div>

            <div class="info-box">
                <div class="component-label">üåê Message Call Context</div>
                <div class="description">
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto;">
// Message Call Structure
type Message struct {
    sender      Address      // Account calling
    recipient   Address      // Account being called
    value       uint256      // Wei being transferred
    gas         uint64       // Gas provided
    input       []byte       // Call data
    depth       uint         // Call stack depth (max 1024)
}

// Context during execution
type Context struct {
    Origin      Address      // tx.origin (original sender)
    GasPrice    uint256      // Gas price of transaction
    Coinbase    Address      // Block miner address
    GasLimit    uint64       // Block gas limit
    BlockNumber uint256      // Current block number
    Time        uint256      // Block timestamp
    Difficulty  uint256      // Block difficulty
    BaseFee     uint256      // EIP-1559 base fee
}

// Call Stack Depth Limit
MAX_CALL_DEPTH = 1024

// 63/64 Rule (EIP-150)
// Only 63/64 of remaining gas passed to sub-calls
gas_for_call = available_gas * 63 / 64</pre>
                </div>
            </div>

            <div class="info-box">
                <div class="component-label">üîí Precompiled Contracts</div>
                <div class="description">
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto;">
// Precompiled contracts (addresses 0x01 - 0x09)
0x01: ecRecover         - 3000 gas  // ECDSA recovery
0x02: SHA256            - 60 + 12 * ceil(len/32) gas
0x03: RIPEMD160         - 600 + 120 * ceil(len/32) gas
0x04: identity          - 15 + 3 * ceil(len/32) gas
0x05: modexp            - Complex pricing
0x06: ecAdd             - 150 gas  // Elliptic curve addition
0x07: ecMul             - 6000 gas // Elliptic curve multiplication
0x08: ecPairing         - 45000 + 34000*k gas
0x09: blake2f           - Rounds dependent

// Example: ecRecover usage for signature verification
function ecRecover(hash, v, r, s) returns (address) {
    // Recovers Ethereum address from signature
    // Used in meta-transactions and signature verification
}</pre>
                </div>
            </div>

            <div class="info-box">
                <div class="component-label">‚ö° JIT Compilation & Optimization</div>
                <div class="description">
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto;">
// EVM Implementations & Optimizations

// 1. Interpreter Mode (Default)
for pc < len(code) {
    opcode = code[pc]
    execute(opcode)
    pc++
}

// 2. JIT Compilation (evmone, evmjit)
// Bytecode ‚Üí Native machine code
compiledCode = jit.compile(bytecode)
result = compiledCode.execute(context)

// 3. Optimizations
- Jump destination analysis (JUMPDEST validation)
- Subroutine detection
- Common pattern optimization
- Gas metering injection
- Stack caching in registers

// 4. Static Analysis
jumpdests = analyzeJumpDests(code)
if jump_target not in jumpdests {
    throw InvalidJumpError
}</pre>
                </div>
            </div>
        </div>
        
        <div class="interactive-hint">
            üí° EVM, t√ºm Ethereum node'larƒ±nda aynƒ± ≈üekilde √ßalƒ±≈üan deterministik bir sanal makinedir.
        </div>
    </div>
</body>
</html>